{
    "fundNameForDisplay": "SFLD_FE",
    "fundUniqueId": "SFLD_FE",
    "boxSLA":[
        {
            "UBI":"BOX::NAV.L0.L0ProcessorNAV",
            "periodicity":"end-of-month",
            "extraConfig":{
                "L0File": "NAVPack"
            },
            "boxesPostProcess":[ 
                {
                    "UBI":"BOX::NAV.Validations.L1ValidationNAV",
                    "extraConfig":{
                        "sourceB":{
                            "source":"SSNC_NAVPACK",
                            "processDate":"eval::self.runDate"
                        },
                        "sourceA":{
                            "source":"SSNC_NAVPACK",
                            "processDate":"eval::(datetime.strptime(self.runDate, '%Y-%m-%d').replace(day=1) - timedelta(days=1)).strftime('%Y-%m-%d')"
                        },
                        "validationParams":{
                            "major_price_change":{
                                "threshold":0.1
                            },
                            "major_FX_change":{
                                "threshold":0.05
                            },
                            "major_trades":{
                                "threshold":0.15
                            },
                            "major_mv_change":{
                                "threshold":100000
                            },
                            "legal_fees_change":{
                                "threshold":0.25
                            },
                            "admin_fees_change":{
                                "threshold":0.25
                            },
                            "other_admin_expenses_change":{
                                "threshold":0.25
                            },
                            "management_fees_change":{
                                "threshold":0.10
                            },
                            "performance_fees_change":{
                                "threshold":0.15
                            },

                            "debt_to_equity_ratio":{
                                "threshold":0.15
                            },
                            "gross_leverage_ratio":{
                                "threshold":0.15
                            },
                            "expense_ratio":{
                                "threshold":0.15
                            },
                            "margin_to_equity_ratio":{
                                "threshold":0.15
                            },
                            "management_fee_ratio":{
                                "threshold":0.15
                            },
                            "current_assets_ratio":{
                                "threshold":0.15
                            },
                            "cash_ratio":{
                                "threshold":0.15
                            },
                            "liquidity_ratio":{
                                "threshold":0.15
                            },
                            "top_10_positions_mv_ratio":{
                                "threshold":0.15
                            },
                            "asset_concentration_ratio":{
                                "threshold":0.15
                            },
                            "net_long_position_ratio":{
                                "threshold":0.15
                            }
                        },
                        "validations":[
                            {
                                "function":"CF::l0_validations.check_files_recieved"
                            },
                            {   
                                "function":"CF::pricing_validations.price_validations"
                            },
                            {
                                "function":"CF::pricing_validations.positionValidations"
                            },
                            {
                                "function":"CF::pricing_validations.tradingIandEValidations"
                            },
                            {
                                "function":"CF::pricing_validations.majorMVChangeValidations"
                            },
                            {
                                "function":"CF::revenueAndExpenseValidations.NonTradingValidations"
                            },
                            {
                                "function":"CF::ratioValidations.ratioValidations"
                            },
                            {
                                "function":"CF::pricing_validations.positionsMVSanityCheck"
                            }
                        ]
                    }
                }
            ]
        }
    ],
    "L0Files":{
        "NAVPack":{
            "customFileIdentifier":{
                "type":"strBegins",
                "value":"SSNC NAV PACK - Fundamental Equity"
            },
            "dateInNameFormat":"MMM YYYY",
            "fileFormat":"XLSX",
            "actionsBySheets":{
                "Trial Balance":[
                    {
                        "dataOperations":[
                            {
                                "dataTypeToSaveAs":"tabular",
                                "opParams":{
                                    "layerName":"l1",
                                    "tableName":"trail_balance",
                                    "operation":"replaceOrAppendByKey",
                                    "key":["processDate","fundName","source"]
                                },
                                "colsToKeep":{
                                    "fundName":"fundName",
                                    "source":"source",
                                    "processDate":"processDate",
                                    "assetsOrLiabilities":"assetsOrLiabilities",
                                    "Level1":"Level1",
                                    "Level2":"Accounting Head",
                                    "Level3":"Financial Account",
                                    "periodEndMV_InBase":"periodEndMV_InBase"
                                }
                            }
                        ],
                        "parseParameters":{
                            "sheetType":"XLSX_Pivoted_Sheet",
                            "dateColName":"processDate",
                            "fundColName":"fundName",
                            "sheetParams":{
                                "pivotedColumns":["Category"],
                                "topRowsWithExtraData":10,
                                "lambdas":{
                                    "assetsOrLiabilities":"CF::SSNC_xlsx.getTBAssetOrLiability",
                                    "Level1":"CF::SSNC_xlsx.getTBLevel1",
                                    "periodEndMV_InBase":"lambda row: float(row['Ending Balance'])",
                                    "source":"lambda row: 'Marquant'"
                                },
                                "columnFilters":{
                                    "Type":"lambda x: x != 'Capital'"
                                }
                            }
                        }
                    },
                    {
                        "dataOperations":[
                            {
                                "dataTypeToSaveAs":"tabular",
                                "opParams":{
                                    "layerName":"l1",
                                    "tableName":"revenueAndExpense",
                                    "operation":"replaceOrAppendByKey",
                                    "key":["processDate","fundName","source"]
                                },
                                "colsToKeep":{
                                    "fundName":"fundName",
                                    "source":"source",
                                    "processDate":"processDate",
                                    "type":"Type",
                                    "subType":"subType",
                                    "subType2":"subType2",
                                    "periodEndMV_InBase":"periodEndMV_InBase"
                                }
                            }
                        ],
                        "parseParameters":{
                            "sheetType":"XLSX_Pivoted_Sheet",
                            "dateColName":"processDate",
                            "fundColName":"fundName",
                            "sheetParams":{
                                "pivotedColumns":["Type"],
                                "topRowsWithExtraData":10,
                                "lambdas":{
                                    "periodEndMV_InBase":"lambda row: float(row['Ending Balance'])",
                                    "subType":"CF::SSNC_xlsx.getRevenueOrExpenseSubType",
                                    "subType2":"CF::SSNC_xlsx.getRevenueOrExpenseSubType2",
                                    "source":"lambda row: 'Marquant'"
                                },
                                "columnFilters":{
                                    "Type":"lambda x: x == 'Revenue' or x == 'Expense'"
                                }
                            }
                        }
                    }
                ],
                "Portfolio Valuation By Instrum":[
                    {
                        "dataOperations":[
                            {
                                "dataTypeToSaveAs":"tabular",
                                "opParams":{
                                    "layerName":"l1",
                                    "tableName":"positions_with_fx",
                                    "operation":"replaceOrAppendByKey",
                                    "key":["processDate","fundName","source"]
                                },
                                "colsToKeep":{
                                    "fundName":"fundName",
                                    "source":"source",
                                    "processDate":"processDate",
                                    "productAssetClass":"Inv Type",
                                    "productName":"Inv Desc",
                                    "periodEndQuantity":"periodEndQuantity",
                                    "periodEndMV_InBase":"periodEndMV_InBase",
                                    "periodEndFXRate":"periodEndFXRate"
                                }
                            }
                        ],
                        "parseParameters":{
                            "sheetType":"XLSX_Pivoted_Sheet",
                            "dateColName":"processDate",
                            "fundColName":"fundName",
                            "sheetParams":{
                                "pivotedColumns":["Inv Desc"],
                                "topRowsWithExtraData":10,
                                "lambdas":{
                                    "periodEndMV_InBase":"lambda row: float(row['End Book MV'])",
                                    "periodEndQuantity":"lambda row: float(row['End Qty'])",
                                    "periodEndFXRate":"lambda row: -1 if float(row['End Local MV'])==0 else float(row['End Book MV'])/float(row['End Local MV'])",
                                    "source":"lambda row: 'Marquant'"
                                },
                                "columnFilters":{
                                    "Inv Type":"lambda x: x != 'CASH'"
                                }
                            }
                        }
                    }
                ],
                "Receivable and Payable Journal":[
                    {
                        "dataOperations":[
                            {
                                "dataTypeToSaveAs":"tabular",
                                "opParams":{
                                    "layerName":"l1",
                                    "tableName":"AP_AR_journal",
                                    "operation":"replaceOrAppendByKey",
                                    "key":["processDate","fundName"]
                                },
                                "colsToKeep":{
                                    "fundName":"fundName",
                                    "source":"source",
                                    "processDate":"processDate",
                                    "financialAccount":"Fin Acct",
                                    "currency":"Currency",
                                    "securityType":"Security Type",
                                    "securityId":"Security Id",
                                    "securityDesc":"Security Desc",
                                    "custodianAccount":"Custodian Account",
                                    "tradeDate":"Trade Date",
                                    "contractualSettleDate":"Contractual Settle Date",
                                    "actualSettleDate":"Actual Settle Date",
                                    "transactionId":"Tran ID",
                                    "transactionType":"Tran Description",
                                    "periodEndMV_InBase":"periodEndMV_InBase"
                                }
                            }
                        ],
                        "parseParameters":{
                            "sheetType":"XLSX_Pivoted_Sheet",
                            "dateColName":"processDate",
                            "fundColName":"fundName",
                            "sheetParams":{
                                "pivotedColumns":["Security Id"],
                                "topRowsWithExtraData":11,
                                "lambdas":{
                                    "periodEndMV_InBase":"lambda row: float(row['Book Market Value'])",
                                    "source":"lambda row: 'Marquant'"
                                },
                                "columnFilters":{
                                }
                            }
                        }
                    }
                ]
            }
        }
    }
}